# –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `this`

## –ß—Ç–æ —Ç–∞–∫–æ–µ `this`?

`this` - —ç—Ç–æ —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏. –ó–Ω–∞—á–µ–Ω–∏–µ `this` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ç–µ–º, **–∫–∞–∫** –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è, –∞ –Ω–µ –≥–¥–µ –æ–Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∞.

```javascript
function showThis() {
  console.log(this);
}

showThis(); // –í strict mode: undefined, –±–µ–∑ strict: window/global
```

---

## üîπ 2. –ü—Ä–∞–≤–∏–ª–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è `this`

### 2.1. –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

–í–Ω–µ —Ñ—É–Ω–∫—Ü–∏–π `this` —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç:

- –ë—Ä–∞—É–∑–µ—Ä: `window`
- Node.js: `global`

```javascript
console.log(this === window); // true (–≤ –±—Ä–∞—É–∑–µ—Ä–µ)
```

### 2.2. –ú–µ—Ç–æ–¥ –æ–±—ä–µ–∫—Ç–∞

–í –º–µ—Ç–æ–¥–∞—Ö –æ–±—ä–µ–∫—Ç–∞ `this` —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Å–∞–º –æ–±—ä–µ–∫—Ç:

```javascript
const user = {
  name: "Alice",
  greet() {
    console.log(`Hello, ${this.name}!`);
  },
};

user.greet(); // "Hello, Alice!"
```

### 2.3. –û–±—ã—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è

–ó–Ω–∞—á–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∂–∏–º–∞:

- **strict mode**: `undefined`
- **–±–µ–∑ strict**: –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç

```javascript
function checkThis() {
  "use strict";
  console.log(this); // undefined
}
```

### 2.4. –°—Ç—Ä–µ–ª–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

–ù–µ –∏–º–µ—é—Ç —Å–≤–æ–µ–≥–æ `this`, –±–µ—Ä—É—Ç –µ–≥–æ –∏–∑ –≤–Ω–µ—à–Ω–µ–π —Ñ—É–Ω–∫—Ü–∏–∏:

```javascript
const obj = {
  value: 42,
  getValue: () => {
    console.log(this.value); // undefined (–±–µ—Ä–µ—Ç this –∏–∑ –≥–ª–æ–±. –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
  },
};
```

---

## üîπ 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `this`

### 3.1. –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

–ú–µ—Ç–æ–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è `this`:

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ .call() –∫–æ–≥–¥–∞ –∏–∑–≤–µ—Å—Ç–Ω—ã –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã

–ü—Ä–∏–º–µ–Ω—è–π—Ç–µ .apply() –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∞—Å—Å–∏–≤–∞–º–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤

–í—ã–±–∏—Ä–∞–π—Ç–µ .bind() –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

#### `call()`

```javascript
function introduce(greeting) {
  console.log(`${greeting}, I'm ${this.name}`);
}

const person = { name: "Bob" };
introduce.call(person, "Hi"); // "Hi, I'm Bob"
```

#### `apply()`

```javascript
introduce.apply(person, ["Hello"]); // "Hello, I'm Bob"
```

#### `bind()`

```javascript
const boundFunc = introduce.bind(person);
boundFunc("Hey"); // "Hey, I'm Bob"
```

### 3.2. –ü–æ—Ç–µ—Ä—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

–ß–∞—Å—Ç–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –º–µ—Ç–æ–¥–æ–≤:

```javascript
const timer = {
  message: "Timeout!",
  start() {
    setTimeout(function () {
      console.log(this.message); // undefined (this === window)
    }, 1000);
  },
};
```

**–†–µ—à–µ–Ω–∏–µ:**

```javascript
// 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ bind
setTimeout(this.showMessage.bind(this), 1000);

// 2. –°—Ç—Ä–µ–ª–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
setTimeout(() => {
  console.log(this.message); // –†–∞–±–æ—Ç–∞–µ—Ç!
}, 1000);

// 3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ this
const self = this;
setTimeout(function () {
  console.log(self.message);
}, 1000);
```

---

## üîπ 4. –û—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏

### 4.1. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã

–í –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö `this` —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç:

```javascript
function Person(name) {
  this.name = name;
}

const alice = new Person("Alice");
console.log(alice.name); // "Alice"
```

### 4.2. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π

–í DOM-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö `this` —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç:

```javascript
button.addEventListener("click", function () {
  console.log(this); // <button> —ç–ª–µ–º–µ–Ω—Ç
});
```

### 4.3. –ö–ª–∞—Å—Å—ã

–í –º–µ—Ç–æ–¥–∞—Ö –∫–ª–∞—Å—Å–∞ `this` —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä:

```javascript
class User {
  constructor(name) {
    this.name = name;
  }

  sayHi() {
    console.log(`Hi, ${this.name}!`);
  }
}
```

---

## üéØ –í–∞–∂–Ω—ã–µ –≤—ã–≤–æ–¥—ã

1. `this` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è **–≤ –º–æ–º–µ–Ω—Ç –≤—ã–∑–æ–≤–∞** —Ñ—É–Ω–∫—Ü–∏–∏
2. –°—Ç—Ä–µ–ª–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –∏–º–µ—é—Ç —Å–≤–æ–µ–≥–æ `this`
3. –î–ª—è —Ñ–∏–∫—Å–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `bind()`
4. –í –º–µ—Ç–æ–¥–∞—Ö –æ–±—ä–µ–∫—Ç–∞ `this` —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Å–∞–º –æ–±—ä–µ–∫—Ç
5. –í –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö `this` - –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä

## üìö –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞

```javascript
// –ü–ª–æ—Ö–æ (–ø–æ—Ç–µ—Ä—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
const badExample = {
  value: 1,
  increment: function () {
    setTimeout(function () {
      this.value++; // –û—à–∏–±–∫–∞!
    }, 100);
  },
};

// –•–æ—Ä–æ—à–æ
const goodExample = {
  value: 1,
  increment: function () {
    setTimeout(() => {
      this.value++; // –†–∞–±–æ—Ç–∞–µ—Ç!
    }, 100);
  },
};
```

---

**–¢–µ—Å—Ç –Ω–∞ –ø–æ–Ω–∏–º–∞–Ω–∏–µ:**

```javascript
const obj = {
  prop: "Hello",
  func1: function () {
    console.log(this.prop);
  },
  func2: () => console.log(this.prop),
};

obj.func1(); // –ß—Ç–æ –≤—ã–≤–µ–¥–µ—Ç?
obj.func2(); // –ß—Ç–æ –≤—ã–≤–µ–¥–µ—Ç?
```

> –û—Ç–≤–µ—Ç—ã:  
> `func1`: "Hello" (–æ–±—ã—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è)  
> `func2`: undefined (—Å—Ç—Ä–µ–ª–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è)

### –í–æ–ø—Ä–æ—Å—ã

- –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è this –≤ –æ–±—ã—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Å—Ç—Ä–µ–ª–æ—á–Ω–æ–π?

- –ö–∞–∫ –ø—Ä–∏–≤—è–∑–∞—Ç—å this –∫ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Å–ª–µ –µ—ë –æ–±—ä—è–≤–ª–µ–Ω–∏—è?

- –ß—Ç–æ –≤—ã–≤–µ–¥–µ—Ç this –≤ setTimeout(function() { console.log(this) }, 1000)?

- –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç call, apply, bind?

- –ü–æ—á–µ–º—É –º–µ—Ç–æ–¥ –æ–±—ä–µ–∫—Ç–∞ —Ç–µ—Ä—è–µ—Ç this, –µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å –µ–≥–æ –≤ –∫–æ–ª–±—ç–∫?
